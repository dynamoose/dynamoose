<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.4.1 by Michael Rose
  Copyright 2017 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>Schema - Dynamoose</title>




<meta name="description" content="An amazing website.">




<meta name="author" content="">

<meta property="og:locale" content="en">
<meta property="og:site_name" content="Dynamoose">
<meta property="og:title" content="Schema">


  <link rel="canonical" href="http://0.0.0.0:4000/_docs/schema/">
  <meta property="og:url" content="http://0.0.0.0:4000/_docs/schema/">























<!-- end SEO -->


<link href="http://0.0.0.0:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Dynamoose Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://0.0.0.0:4000/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->

<meta http-equiv="cleartype" content="on">
  </head>

  <body class="layout--default">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="http://0.0.0.0:4000/">Dynamoose</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item"><a href="http://0.0.0.0:4000/">Quick-Start</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://0.0.0.0:4000/api">API</a></li>
          
        </ul>
        <button><div class="navicon"></div></button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    <h1 id="schema">Schema</h1>

<p>Schemas are used to define DynamoDB table attributes and their constraints.</p>

<h2 id="creating-a-new-schema">Creating a new Schema</h2>

<p>Schemas are created using <code class="highlighter-rouge">new Schema(attrDefObj, options)</code>.</p>

<p>The first argument (<code class="highlighter-rouge">attrDefObj</code>) is an object containing attribute definitions. Keys of this object correspond to attributes in the resulting DynamoDB table. The values of these keys define constraints on those attributes (as well as a few handy features…). See <a href="#attribute-definitions">Attribute Definitions</a> for a more thorough description.</p>

<p>The second argument (<code class="highlighter-rouge">options</code>) defines options for the table that are beyond the scope of individual attributes. See <a href="#schema-options">Schema Options</a> for more.</p>

<p>The following is an example of creating a new Schema:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">Schema</span> <span class="o">=</span> <span class="nx">dynamoose</span><span class="p">.</span><span class="nx">Schema</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">dogSchema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({</span>
  <span class="na">ownerId</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="nb">Number</span><span class="p">,</span>
    <span class="na">validate</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">v</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="p">},</span>
    <span class="na">hashKey</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="na">name</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
    <span class="na">rangeKey</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">index</span><span class="p">:</span> <span class="kc">true</span> <span class="c1">// name: nameLocalIndex, ProjectionType: ALL</span>
  <span class="p">},</span>
  <span class="na">breed</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
    <span class="na">trim</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">required</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">index</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">global</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="na">rangeKey</span><span class="p">:</span> <span class="s1">'ownerId'</span><span class="p">,</span>
      <span class="na">name</span><span class="p">:</span> <span class="s1">'BreedIndex'</span><span class="p">,</span>
      <span class="na">project</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// ProjectionType: ALL</span>
      <span class="na">throughput</span><span class="p">:</span> <span class="mi">5</span> <span class="c1">// read and write are both 5</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="na">color</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">lowercase</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">type</span><span class="p">:</span> <span class="p">[</span><span class="nb">String</span><span class="p">],</span>
    <span class="na">default</span><span class="p">:</span> <span class="p">[</span><span class="s1">'Brown'</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="na">age</span><span class="p">:</span> <span class="nb">Number</span>
<span class="p">},</span>
<span class="p">{</span>
  <span class="na">throughput</span><span class="p">:</span> <span class="p">{</span><span class="na">read</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="na">write</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

<h2 id="attribute-types">Attribute Types</h2>

<p>Attribute Types define the domain of a particular attribute. For example, a <code class="highlighter-rouge">name</code> might be set to <code class="highlighter-rouge">String</code> or <code class="highlighter-rouge">age</code> to <code class="highlighter-rouge">Number</code>.</p>

<p>The following table describes valid Attribute Types, and their translation to DynamoDB types:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute Type</th>
      <th style="text-align: center">Resulting DynamoDB Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">String</td>
      <td style="text-align: center">‘S’</td>
    </tr>
    <tr>
      <td style="text-align: center">Number</td>
      <td style="text-align: center">‘N’</td>
    </tr>
    <tr>
      <td style="text-align: center">Boolean</td>
      <td style="text-align: center">‘S’</td>
    </tr>
    <tr>
      <td style="text-align: center">Date</td>
      <td style="text-align: center">‘N’</td>
    </tr>
    <tr>
      <td style="text-align: center">Object</td>
      <td style="text-align: center">‘S’</td>
    </tr>
    <tr>
      <td style="text-align: center">Array</td>
      <td style="text-align: center">‘S’</td>
    </tr>
    <tr>
      <td style="text-align: center">Buffer</td>
      <td style="text-align: center">‘B’</td>
    </tr>
    <tr>
      <td style="text-align: center">[String]</td>
      <td style="text-align: center">‘SS’</td>
    </tr>
    <tr>
      <td style="text-align: center">[Number]</td>
      <td style="text-align: center">‘NS’</td>
    </tr>
    <tr>
      <td style="text-align: center">[Boolean]</td>
      <td style="text-align: center">‘SS’</td>
    </tr>
    <tr>
      <td style="text-align: center">[Date]</td>
      <td style="text-align: center">‘NS’</td>
    </tr>
    <tr>
      <td style="text-align: center">[Object]</td>
      <td style="text-align: center">‘SS’</td>
    </tr>
    <tr>
      <td style="text-align: center">[Array]</td>
      <td style="text-align: center">‘SS’</td>
    </tr>
  </tbody>
</table>

<p><em>**: Use the useNativeBooleans flag to store Boolean values as ‘BOOL’</em></p>

<h2 id="attribute-definitions">Attribute Definitions</h2>

<p>Attribute definitions define constraints on a particular attribute specified in a Schema. Attribute definitions may be an object type (see <a href="#attribute-types">Attribute Types</a>) or an object with the following options:</p>

<p><strong>type</strong>: AttributeType <em>required</em></p>

<p>Required for all attribute definitions. Defines the attribute type. See <a href="#attribute-types">Attribute Types</a>.</p>

<p><strong>hashKey</strong>: boolean</p>

<p>Sets the attribute as the table’s hash key. If this option isn’t specified in a schema, then the first attribute is defined as the hash key.</p>

<p><strong>rangeKey</strong>: boolean</p>

<p>Sets the attribute as the table’s range key.</p>

<p><strong>required</strong>: boolean</p>

<p>Sets the attribute as a ‘required’ attribute. Required attributes must not be saved as undefined or null, or an error will be thrown.</p>

<p><strong>index</strong>: boolean or object</p>

<p>Defines the attribute as a local or global secondary index. Index can either be true or an index definition object. The index definition object can contain the following keys:</p>

<ul>
  <li><em>name: ‘string’</em> - Name of index (Default is <code class="highlighter-rouge">attribute.name + (global ? 'GlobalIndex' : 'LocalIndex')</code>`).</li>
  <li><em>global: boolean</em> - Set the index to be a global secondary index.  Attribute will be the hash key for the Index.</li>
  <li><em>rangeKey: ‘string’</em> - The range key for a global secondary index.</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>_project: boolean</td>
          <td>[‘string’, …]_ - Sets the attributes to be projected for the index.  <code class="highlighter-rouge">true</code> projects all attributes, <code class="highlighter-rouge">false</code> projects only the key attributes, and [‘string’, …] projects the attributes listed. Default is <code class="highlighter-rouge">true</code>.</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>_throughput: number</td>
          <td>{read: number, write: number}_ - Sets the throughput for the global secondary index.</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li><em>useNativeBooleans: boolean</em> - Later versions of Dynamo added support for Boolean attributes. Set to true to add support for Boolean values that aren’t stored as strings.</li>
</ul>

<table>
  <tbody>
    <tr>
      <td><strong>default</strong>: function</td>
      <td>value</td>
    </tr>
  </tbody>
</table>

<p>Applies a default to the attribute’s value when saving, if the values is null or undefined.</p>

<p>If default is a function, the function is called, and the response is assigned to the attribute’s value.</p>

<p>If it is a value, the value is simply assigned.</p>

<p><strong>validate</strong>: function, regular expression, or value</p>

<p>Validation required before for saving.</p>

<p>If validate is a function, the function is used to validate the attribute’s value. The function must have the signature:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">valid</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="k">else</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<p>If it is a RegExp, it is compared using <code class="highlighter-rouge">RegExp.text(value)</code>.</p>

<p>If it is a value, it is compared with <code class="highlighter-rouge">===</code>.</p>

<p><strong>set</strong>: function</p>

<p>Adds a setter function that will be used to transform the value before writing to the DB.</p>

<p><strong>get</strong>: function</p>

<p>Adds a getter function that will be used to transform the value returned from the DB.</p>

<p><strong>trim</strong>: boolean</p>

<p>Trim whitespace from string when saving to DB.</p>

<p><strong>lowercase</strong>: boolean</p>

<p>Convert to lowercase when saving to DB.</p>

<p><strong>uppercase</strong>: boolean</p>

<p>Convert to uppercase when saving to DB.</p>

<h2 id="options">Options</h2>

<table>
  <tbody>
    <tr>
      <td><strong>throughput</strong>: number</td>
      <td>{read: number, write: number}</td>
    </tr>
  </tbody>
</table>

<p>Sets the throughput of the DynamoDB table. The value can either be a number or an object with the keys <code class="highlighter-rouge">read</code> and <code class="highlighter-rouge">write</code> (for example: <code class="highlighter-rouge"><span class="p">{</span><span class="err">read:</span><span class="w"> </span><span class="err">5,</span><span class="w"> </span><span class="err">write:</span><span class="w"> </span><span class="err">2</span><span class="p">}</span></code>). If it is a number, both read and write are configured to that number. If it is omitted, the read and write values will be set to 1.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({...},</span> <span class="p">{</span> <span class="na">throughput</span><span class="p">:</span> <span class="mi">5</span> <span class="p">});</span>
<span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({...},</span> <span class="p">{</span> <span class="na">throughput</span><span class="p">:</span> <span class="p">{</span> <span class="na">read</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">write</span><span class="p">:</span> <span class="mi">2</span> <span class="p">}</span> <span class="p">});</span>
</code></pre>
</div>

<table>
  <tbody>
    <tr>
      <td><strong>timestamps</strong>: boolean</td>
      <td>{createdAt: string, updatedAt: string}</td>
    </tr>
  </tbody>
</table>

<p>Defines that <em>schema</em> must contain fields to control creation and last update timestamps. If it is set to true, this fields will be createdAt for creation date and updatedAt for last update. for example:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({...},</span> <span class="p">{</span> <span class="na">throughput</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">timestamps</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>
</code></pre>
</div>

<p>Also it is possible to specify wich names that field will use, like in the following example:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({...},</span> <span class="p">{</span> <span class="na">throughput</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">timestamps</span><span class="p">:</span> <span class="p">{</span><span class="na">createdAt</span><span class="p">:</span> <span class="s1">'creationDate'</span><span class="p">,</span> <span class="na">updatedAt</span><span class="p">:</span> <span class="s1">'lastUpdateDate'</span><span class="p">});</span>
</code></pre>
</div>

<p><strong>saveUnknown</strong>: boolean</p>

<p>Specifies that attributes not defined in the <em>schema</em> will be saved and retrieved.  This defaults to false.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Schema</span><span class="p">({...},</span> <span class="p">{</span> <span class="na">saveUnknown</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
</code></pre>
</div>


    <script src="http://0.0.0.0:4000/assets/js/main.min.js"></script>

  </body>
</html>
